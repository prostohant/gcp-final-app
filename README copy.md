# Enterprise Agentic RAG System (2026 Edition)

–¶–µ–π –ø—Ä–æ—î–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î –µ—Ç–∞–ª–æ–Ω–Ω—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ—ó RAG-—Å–∏—Å—Ç–µ–º–∏ (Retrieval-Augmented Generation), –ø–æ–±—É–¥–æ–≤–∞–Ω–æ—ó –Ω–∞ Google Cloud Platform.

–°–∏—Å—Ç–µ–º–∞ –ø–æ–≤–Ω—ñ—Å—Ç—é –±–µ–∑—Å–µ—Ä–≤–µ—Ä–Ω–∞ (Serverless), –∫–µ—Ä–æ–≤–∞–Ω–∞ –ø–æ–¥—ñ—è–º–∏ (Event-driven) —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –Ω–æ–≤—ñ—Ç–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ **Gemini 2.0 Flash** —ñ **BigQuery Vector Search**.

## –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

1.  **Ingestion Pipeline (ETL):**
    * –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î PDF —É **Cloud Storage**.
    * **Eventarc** –ø–µ—Ä–µ—Ö–æ–ø–ª—é—î –ø–æ–¥—ñ—é —Ç–∞ –≤–∏–∫–ª–∏–∫–∞—î —Å–µ—Ä–≤—ñ—Å **Ingestor** (Cloud Run).
    * Ingestor –≤–∏—Ç—è–≥—É—î —Ç–µ–∫—Å—Ç, –≥–µ–Ω–µ—Ä—É—î –≤–µ–∫—Ç–æ—Ä–∏ (embeddings) —á–µ—Ä–µ–∑ **Vertex AI (text-embedding-005)**.
    * –í–µ–∫—Ç–æ—Ä–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —É **BigQuery**.

2.  **Agentic Inference (–†–æ–±–æ—Ç–∞ –ê–≥–µ–Ω—Ç–∞):**
    * –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–∞–¥–∞—î –ø–∏—Ç–∞–Ω–Ω—è —Å–µ—Ä–≤—ñ—Å—É **Agent API** (Cloud Run).
    * **Gemini 2.0 Flash** –∞–Ω–∞–ª—ñ–∑—É—î –∑–∞–ø–∏—Ç.
    * –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–µ–Ω –∫–æ–Ω—Ç–µ–∫—Å—Ç, –º–æ–¥–µ–ª—å **—Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ –≤–∏–∫–ª–∏–∫–∞—î —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç (Tool Call)** –¥–ª—è –ø–æ—à—É–∫—É –≤ BigQuery.
    * BigQuery –≤–∏–∫–æ–Ω—É—î –≤–µ–∫—Ç–æ—Ä–Ω–∏–π –ø–æ—à—É–∫ —ñ –ø–æ–≤–µ—Ä—Ç–∞—î —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ñ —á–∞—Å—Ç–∏–Ω–∏ —Ç–µ–∫—Å—Ç—É.
    * –ê–≥–µ–Ω—Ç —Ñ–æ—Ä–º—É—î —Ñ—ñ–Ω–∞–ª—å–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å —ñ–∑ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º–∏ –Ω–∞ –¥–∂–µ—Ä–µ–ª–æ.



## üõ† –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ –≤–∏–º–æ–≥–∏ (Prerequisites)

* Google Cloud Project –∑ –∞–∫—Ç–∏–≤–Ω–∏–º –±—ñ–ª—ñ–Ω–≥–æ–º.
* –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ `gcloud CLI` —Ç–∞ `Terraform`.
* Python 3.11+.

## üöÄ –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è (–ü–æ–∫—Ä–æ–∫–æ–≤–æ)

### 1. –Ü–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (Terraform)

–°—Ç–≤–æ—Ä–µ–Ω–Ω—è Bucket, BigQuery Dataset, —Ç–∞–±–ª–∏—Ü—å —Ç–∞ Service Accounts.

```bash
cd terraform
# –ó–∞–º—ñ–Ω—ñ—Ç—å YOUR_PROJECT_ID —Ç–∞ YOUR_PROJECT_NUMBER –Ω–∞ –≤–∞—à—ñ –¥–∞–Ω—ñ
terraform init
terraform apply -var="project_id=YOUR_PROJECT_ID" -var="project_number=YOUR_PROJECT_NUMBER"
```

### 2. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è BigQuery ML
–ü—ñ—Å–ª—è –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è Terraform –≤–∏–∫–æ–Ω–∞–π—Ç–µ —Ü–µ–π SQL-–∑–∞–ø–∏—Ç —É –∫–æ–Ω—Å–æ–ª—ñ BigQuery, —â–æ–± —Å—Ç–≤–æ—Ä–∏—Ç–∏ –º–æ–¥–µ–ª—å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –µ–º–±–µ–¥–¥—ñ–Ω–≥—ñ–≤: 
```bash
    CREATE OR REPLACE MODEL `enterprise_rag_v2.embedding_model_005`
    REMOTE WITH CONNECTION `us.vertex-ai-gen2-conn`
    OPTIONS (ENDPOINT = 'text-embedding-005');
```

### 3. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç—Ä–∏–≥–µ—Ä–∞ Eventarc
‚ö†Ô∏è –í–∞–∂–ª–∏–≤–æ: –°–ø–æ—á–∞—Ç–∫—É –Ω–∞–¥–∞–π—Ç–µ –ø—Ä–∞–≤–∞ –∞–≥–µ–Ω—Ç—É Cloud Storage, —ñ–Ω–∞–∫—à–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç—Ä–∏–≥–µ—Ä–∞ –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è –ø–æ–º–∏–ª–∫–æ—é.

 1. –î—ñ–∑–Ω–∞–π—Ç–µ—Å—è email —Å–ª—É–∂–±–æ–≤–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ GCS: 
```bash
    gcloud storage service-agent
```
 
 2. –ù–∞–¥–∞–π—Ç–µ –ø—Ä–∞–≤–∞ (–ø—ñ–¥—Å—Ç–∞–≤—Ç–µ email, –æ—Ç—Ä–∏–º–∞–Ω–∏–π –Ω–∞ –∫—Ä–æ—Ü—ñ 1):
```bash
    gcloud projects add-iam-policy-binding YOUR_PROJECT_ID \
        --member="serviceAccount:service-XXXXXXXX@gs-project-accounts.iam.gserviceaccount.com" \
        --role="roles/pubsub.publisher" \
        --condition=None 
```
 3. –°—Ç–≤–æ—Ä—ñ—Ç—å —Ç—Ä–∏–≥–µ—Ä:
```bash
    gcloud eventarc triggers create doc-upload-trigger \
    --location=us \
    --destination-run-service=rag-ingestor \
    --destination-run-region=us-central1 \
    --event-filters="type=google.cloud.storage.object.v1.finalized" \
    --event-filters="bucket=YOUR_DOCS_BUCKET_NAME" \
    --service-account=YOUR_PROJECT_NUMBER-compute@developer.gserviceaccount.com
```
### 4. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è (End-to-End Verification)
–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –≤—Å—ñ—î—ó —Å–∏—Å—Ç–µ–º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Å–∫—Ä–∏–ø—Ç **verify.sh**. –í—ñ–Ω –≥–µ–Ω–µ—Ä—É—î —Ç–µ—Å—Ç–æ–≤–∏–π PDF —ñ–∑ "—Å–µ–∫—Ä–µ—Ç–Ω–æ—é" —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é, –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î –π–æ–≥–æ —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ –∑–º–æ–∂–µ –ê–≥–µ–Ω—Ç –∑–Ω–∞–π—Ç–∏ —Ü–µ–π —Å–µ–∫—Ä–µ—Ç.

 –í–∏–º–æ–≥–∏:
 
  * Cloud Shell (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ) –∞–±–æ –ª–æ–∫–∞–ª—å–Ω–∏–π —Ç–µ—Ä–º—ñ–Ω–∞–ª.
  * –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ **fpdf** (–¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó PDF): **pip install fpdf**.
 
 –ó–∞–ø—É—Å–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏:

 1. –°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª verify.sh —ñ –≤—Å—Ç–∞–≤—Ç–µ –≤ –Ω—å–æ–≥–æ –∫–æ–¥.
 2. –ó—Ä–æ–±—ñ—Ç—å –π–æ–≥–æ –≤–∏–∫–æ–Ω—É–≤–∞–Ω–∏–º:

```bash
     chmod +x verify.sh
```
 3. –ó–∞–ø—É—Å—Ç—ñ—Ç—å:

```bash
     ./verify.sh
```

–Ø–∫—â–æ –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è **"VERIFICATION SUCCESSFUL" (–ü–ï–†–ï–í–Ü–†–ö–£ –ü–†–û–ô–î–ï–ù–û –£–°–ü–Ü–®–ù–û)**, –∑–Ω–∞—á–∏—Ç—å —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ: Ingestion pipeline –≤—ñ–¥–ø—Ä–∞—Ü—é–≤–∞–≤, –≤–µ–∫—Ç–æ—Ä–∏ –∑–∞–ø–∏—Å–∞–Ω—ñ, —ñ Gemini 2.0 —É—Å–ø—ñ—à–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–≤ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ—à—É–∫—É (RAG).

### üßπ –û—á–∏—â–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤
–©–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ —Å–ø–∏—Å–∞–Ω–Ω—è –∫–æ—à—Ç—ñ–≤ –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ä–æ–±–æ—Ç–∏:
 1. –í–∏–¥–∞–ª—ñ—Ç—å —É—Å—ñ —Ñ–∞–π–ª–∏ –∑ –±–∞–∫–µ—Ç–∞ (Bucket).
 2. –í–∏–∫–æ–Ω–∞–π—Ç–µ –∫–æ–º–∞–Ω–¥—É terraform destroy.
 3. –í–∏–¥–∞–ª—ñ—Ç—å –æ–±—Ä–∞–∑–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ –∑ Artifact Registry.
